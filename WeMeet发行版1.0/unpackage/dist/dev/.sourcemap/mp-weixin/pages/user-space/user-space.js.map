{"version":3,"sources":["uni-app:///main.js","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?2f3a","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?2b3e","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?80aa","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?33c0","uni-app:///pages/user-space/user-space.vue","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?1cbc","webpack:///D:/1项目实践/前端代码！！！/pages/user-space/user-space.vue?11cf"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2G;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAumB,CAAgB,onBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiE3nB,wF;;AAEA;AACA;AACA,gCADA;AAEA,sBAFA;AAGA,gCAHA;AAIA,wCAJA;AAKA,0BALA;AAMA,sBANA;AAOA,kCAPA;AAQA,oBARA,EADA;;AAWA,MAXA,kBAWA;AACA;AACA,iBADA;AAEA;AACA,gBADA;AAEA,mBAFA;AAGA,oBAHA;AAIA,cAJA;AAKA,eALA;AAMA,wBANA;AAOA,mBAPA;AAQA,aARA;AASA,oBATA;AAUA,eAVA;AAWA,gBAXA;AAYA,cAZA,EAFA;;AAgBA;AACA,4BADA;AAEA,4BAFA;AAGA,4BAHA,CAhBA;;AAqBA,iBArBA;AAsBA;AACA,iCADA;AAEA,kCAFA;AAGA,mCAHA,CAtBA;;AA2BA;AACA;AACA,0BADA;AAEA,gBAFA;AAGA,eAHA;AAIA,wBAJA,EADA;;AAOA;AACA,0BADA;AAEA,gBAFA;AAGA,eAHA;AAIA,wBAJA,EAPA,CA3BA;;;;AA0CA,GAtDA;AAuDA;AACA,eAxDA,2BAwDA;AACA;AACA;AACA,GA3DA;AA4DA,0BA5DA,oCA4DA,CA5DA,EA4DA;AACA;AACA,GA9DA;AA+DA,QA/DA,kBA+DA,CA/DA,EA+DA;AACA;AACA,GAjEA;AAkEA;AACA,UADA,kBACA,MADA,EACA;AACA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA,eARA,uBAQA,MARA,EAQA;AACA,sBADA,GACA,gBADA;AAEA,qBAFA,GAEA,kBAFA;AAGA;AAHA;AAKA,gDALA;AAMA;AACA;AACA;AACA,gCATA;;;AAYA;AACA,mCADA;AAEA;AACA,+BADA,EAFA,CAZA,kHAYA,GAZA,6BAYA,GAZA;;;AAkBA,gDAlBA;AAmBA;AACA;AACA;AACA,2DAtBA;;AAwBA,uBAxBA,GAwBA,8GAxBA;AAyBA;AACA,4BADA;AAEA,0BAFA;AAGA,uCAHA;AAIA,yCAJA;AAKA,wDALA;AAMA,wCANA;AAOA,sCAPA;AAQA,kCARA;AASA,kCATA;AAUA,6BAVA;AAWA,0DAXA;AAYA,gDAZA;AAaA,kDAbA;AAcA,qDAdA,GAzBA;;AAyCA,KAjDA;AAkDA;AACA,aAnDA,qBAmDA,EAnDA,EAmDA;;AAEA,6CAFA;AAGA,4CAHA;;AAKA,2DALA,kHAKA,GALA,6BAKA,GALA;AAMA,iDANA;AAOA,uCAPA;;AASA;AACA;AACA;AACA;AACA,iBAbA;AAcA,KAjEA;AAkEA;AACA,iBAnEA,yBAmEA,GAnEA,EAmEA;AACA;AACA;AACA;AACA,uBADA;AAEA,gCAFA;AAGA,iBAHA;;AAKA;AACA,KA5EA;AA6EA;AACA,aA9EA,uBA8EA;AACA;AACA;AACA,2DADA;;AAGA;AACA;AACA,KArFA;AAsFA;AACA,SAvFA,mBAuFA;AACA;AACA,mBAFA,GAEA,sDAFA;AAGA,mBAHA,GAGA,2CAHA;AAIA;AACA,0CADA;AAEA;AACA,+BADA;AAEA,oCAFA;AAGA,mCAHA,EAFA,CAJA,kHAIA,GAJA,6BAIA,GAJA;;;AAYA,iDAZA;AAaA,kCAbA;AAcA,kCAdA;;AAgBA;AACA;AACA;AACA;AACA,mCApBA;AAqBA,KA5GA;AA6GA;AACA,YA9GA,sBA8GA;AACA;AACA,gCADA;AAEA,sCAFA;AAGA,wCAHA;;AAKA;AACA,yEADA;;AAGA;AACA,KAxHA;AAyHA;AACA,YA1HA,sBA0HA;AACA;AACA;AACA;AACA;AACA;AACA,KAhIA;AAiIA,UAjIA,kBAiIA,KAjIA,EAiIA;AACA;AACA;AACA;AACA,KArIA;AAsIA;AACA,WAvIA,qBAuIA;AACA,oBADA,GACA,oCADA;AAEA,mBAFA,GAEA,8GAFA;AAGA,qBAHA,GAGA,eAHA;AAIA,4DAJA,kHAIA,GAJA,6BAIA,GAJA;AAKA,iCALA;AAMA,iDANA;AAOA,uDAPA;AAQA,yDARA;;AAUA,mBAVA,GAUA,EAVA;AAWA,oBAXA,GAWA,kBAXA;AAYA;AACA;AACA;AACA;AACA;AACA,yFAjBA;;AAmBA,KA1JA;AA2JA,YA3JA,oBA2JA,IA3JA,EA2JA;AACA;AACA,4BADA;AAEA,kCAFA;AAGA,oCAHA;AAIA,0CAJA;AAKA,mBALA;AAMA,yBANA;AAOA,mBAPA,EAOA;AACA,+BARA;AASA,oBATA;AAUA,uBAVA;AAWA,2BAXA;AAYA;AACA,uEADA,EACA;AACA,kCAFA;AAGA,gCAHA,EAZA;;AAiBA,gCAjBA;AAkBA,sCAlBA;AAmBA,+BAnBA;AAoBA,mCApBA;AAqBA,mCArBA;;AAuBA;AACA;AACA;AACA;AACA,KAvLA,EAlEA,E;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAA03B,CAAgB,y2BAAG,EAAC,C;;;;;;;;;;;ACA94B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user-space/user-space.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user-space/user-space.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-space.vue?vue&type=template&id=23cdf4c6&\"\nvar renderjs\nimport script from \"./user-space.vue?vue&type=script&lang=js&\"\nexport * from \"./user-space.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user-space.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user-space/user-space.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=template&id=23cdf4c6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t<view class=\"iconfont icon-zengjia\" style=\"position: absolute;right: 15upx;top: 15upx;z-index: 1000;color: #FFFFFF;background: rgba(51, 51, 51, 0.4);border-radius: 100%;padding: 20upx;font-size: 32upx;line-height: 1;\" @tap=\"togleShow\"></view>\r\n\t\t<!-- #endif -->\n\t\t<!-- 背景图 + 用户基本信息 -->\r\n\t\t<user-space-head :userinfo=\"userinfo\" @update=\"updateGuanZhu\"></user-space-head>\r\n\t\t<!-- 统计 -->\r\n\t\t<view class=\"user-space-data\">\r\n\t\t\t<home-data :homedata=\"spacedata\"></home-data>\r\n\t\t</view>\r\n\t\t<view style=\"height: 20upx; background: #F4F4F4;\"></view>\r\n\t\t<!-- tab导航 -->\r\n\t\t<swiper-tab-head \r\n\t\t:tabBars=\"tabBars\" \r\n\t\t:tabIndex=\"tabIndex\"\r\n\t\t@tabtap=\"tabtap\"\r\n\t\tscrollItemStyle=\"width:33.33%;\"\r\n\t\tscrollStyle=\"border-bottom:0;\">\r\n\t\t</swiper-tab-head>\r\n\t\t\r\n\t\t<block v-for=\"(item,index) in tablist\" :key=\"index\">\r\n\t\t\t<template v-if=\"tabIndex===0 && tabIndex === index\">\r\n\t\t\t\t<!-- 主页 -->\r\n\t\t\t\t<user-space-userinfo :userinfo=\"userinfo\"></user-space-userinfo>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"tabIndex==index\">\r\n\t\t\t\t<template v-if=\"item.list.length > 0\">\r\n\t\t\t\t\t<!-- 列表 -->\r\n\t\t\t\t\t<block v-for=\"(list,listindex) in item.list\" :key=\"listindex\">\r\n\t\t\t\t\t\t<common-list nonavigate :item=\"list\" :index=\"listindex\"></common-list>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t<load-more :loadtext=\"item.loadtext\"></load-more>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else-if=\"!item.firstload\">\r\n\t\t\t\t\t<view style=\"font-size: 50upx;font-weight: bold;color: #CCCCCC;\r\n\t\t\t\t\tpadding-top: 100upx;\" class=\"u-f-ajc\">Loading ...</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<!-- 无内容默认 -->\r\n\t\t\t\t\t<view style=\"font-size: 50upx;font-weight: bold;color: #CCCCCC;\r\n\t\t\t\t\tpadding-top: 100upx;\" class=\"u-f-ajc\">No content~</view>\r\n\t\t\t\t</template>\r\n\t\t\t</template>\r\n\t\t</block>\r\n\t\t\r\n\t\t<!-- 操作菜单 -->\r\n\t\t<user-space-popup :show=\"show\" \r\n\t\t:isblack=\"userinfo.isblack\"\r\n\t\t@hide=\"togleShow\"\r\n\t\t@lahei=\"lahei\"\r\n\t\t@chat=\"goToChat\"></user-space-popup>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport userSpaceHead from \"../../components/user-space/user-space-head.vue\";\r\n\timport homeData from \"../../components/home/home-data.vue\";\r\n\timport swiperTabHead from \"../../components/index/swiper-tab-head.vue\";\r\n\timport userSpaceUserinfo from \"../../components/user-space/user-space-userinfo.vue\";\r\n\timport commonList from \"../../components/common/common-list.vue\";\r\n\timport loadMore from \"../../components/common/load-more.vue\";\r\n\timport userSpacePopup from \"../../components/user-space/user-space-popup.vue\";\r\n\timport Time from \"../../common/time.js\";\r\n\timport noThing from \"../../components/common/no-thing.vue\"\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tuserSpaceHead,\r\n\t\t\thomeData,\r\n\t\t\tswiperTabHead,\r\n\t\t\tuserSpaceUserinfo,\r\n\t\t\tcommonList,\r\n\t\t\tloadMore,\r\n\t\t\tuserSpacePopup,\r\n\t\t\tnoThing\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tshow:false,\n\t\t\t\tuserinfo:{\r\n\t\t\t\t\tbgimg:1,\r\n\t\t\t\t\tuserpic:\"\",\r\n\t\t\t\t\tusername:\"\",\r\n\t\t\t\t\tsex:0,\r\n\t\t\t\t\tage:20,\r\n\t\t\t\t\tisguanzhu:false,\r\n\t\t\t\t\tregtime:\"\",\r\n\t\t\t\t\tid:0,\r\n\t\t\t\t\tbirthday:\"\",\r\n\t\t\t\t\tjob:\"\",\r\n\t\t\t\t\tpath:\"\",\r\n\t\t\t\t\tqg:\"\"\r\n\t\t\t\t},\r\n\t\t\t\tspacedata:[\r\n\t\t\t\t\t{ name:\"获赞\", num:0 },\r\n\t\t\t\t\t{ name:\"关注\", num:0 },\r\n\t\t\t\t\t{ name:\"粉丝\", num:0 },\r\n\t\t\t\t],\r\n\t\t\t\ttabIndex:0,\r\n\t\t\t\ttabBars:[\r\n\t\t\t\t\t{ name:\"主页\",id:\"zhuye\" },\r\n\t\t\t\t\t{ name:\"话题\",id:\"qiushi\" },\r\n\t\t\t\t\t{ name:\"动态\",id:\"dongtai\" },\r\n\t\t\t\t],\r\n\t\t\t\ttablist:[ {},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false\r\n\t\t\t\t\t},\r\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t// 上拉触底事件\r\n\t\tonReachBottom() {\r\n\t\t\t// 上拉加载\r\n\t\t\tthis.loadmore();\r\n\t\t},\r\n\t\tonNavigationBarButtonTap(e) {\r\n\t\t\tif(e.index==0){ this.togleShow(); }\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.__init(e.userid);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t__init(userid){\r\n\t\t\t\t// 初始化用户信息\r\n\t\t\t\tthis.getUserInfo(userid)\r\n\t\t\t\t// 初始化统计数据\r\n\t\t\t\tthis.getCounts(userid)\r\n\t\t\t},\r\n\t\t\t// 初始化用户信息\r\n\t\t\tasync getUserInfo(userid){\r\n\t\t\t\tlet sexArr=['不限','男','女'];\r\n\t\t\t\tlet qgArr=['秘密','未婚','已婚'];\r\n\t\t\t\t// 用户本人\r\n\t\t\t\tlet isme,info,isguanzhu,isblack;\r\n\t\t\t\tif (userid == this.User.userinfo.id) {\r\n\t\t\t\t\tinfo = this.User.userinfo;\r\n\t\t\t\t\tisme = true;\r\n\t\t\t\t\tisguanzhu = false;\r\n\t\t\t\t\tisblack = false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 非本人，获取用户信息\r\n\t\t\t\t\tlet [err,res] = await this.$http.post('/getuserinfo',{\r\n\t\t\t\t\t\tuser_id:userid\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 错误处理\r\n\t\t\t\t\tif (!this.$http.errorCheck(err,res)) return;\r\n\t\t\t\t\tinfo = res.data.data;\r\n\t\t\t\t\tisme = false;\r\n\t\t\t\t\tisguanzhu = !!res.data.data.fens.length;\r\n\t\t\t\t\tisblack = !!res.data.data.blacklist.length;\r\n\t\t\t\t}\r\n\t\t\t\tlet regtime = info.create_time ? Time.gettime.dateFormat(new Date(info.create_time*1000),'{Y}-{MM}-{DD}') : \"未知\";\r\n\t\t\t\tthis.userinfo = {\r\n\t\t\t\t\tisme:isme,\r\n\t\t\t\t\tbgimg:1,\r\n\t\t\t\t\tuserpic:info.userpic,\r\n\t\t\t\t\tusername:info.username,\r\n\t\t\t\t\tsex:sexArr[info.userinfo.sex] || \"不限\",\r\n\t\t\t\t\tage:info.userinfo.age,\r\n\t\t\t\t\tisguanzhu:isguanzhu,\r\n\t\t\t\t\tisblack:isblack,\r\n\t\t\t\t\tregtime:regtime,\r\n\t\t\t\t\tid:info.id,\r\n\t\t\t\t\tbirthday:info.userinfo.birthday || \"未知\",\r\n\t\t\t\t\tjob:info.userinfo.job || \"未知\",\r\n\t\t\t\t\tpath:info.userinfo.path || \"未知\",\r\n\t\t\t\t\tqg:qgArr[info.userinfo.qg] || '秘密'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 初始化统计数据\r\n\t\t\tasync getCounts(id){\r\n\t\t\t\tlet counts;\r\n\t\t\t\tif (id == this.User.userinfo.id) {\r\n\t\t\t\t\tcounts = this.User.counts;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet [err,res] =await this.$http.get('/user/getcounts/'+id);\r\n\t\t\t\t\tif (!this.$http.errorCheck(err,res)) return;\r\n\t\t\t\t\tcounts = res.data.data;\r\n\t\t\t\t}\r\n\t\t\t\tif (counts) {\r\n\t\t\t\t\tthis.spacedata[0].num = counts.post_count;\r\n\t\t\t\t\tthis.spacedata[1].num = counts.withfollow_count;\r\n\t\t\t\t\tthis.spacedata[2].num = counts.withfen_count;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 更新关注状态\r\n\t\t\tupdateGuanZhu(val){\r\n\t\t\t\tthis.userinfo.isguanzhu = val;\r\n\t\t\t\t// 通知全局\r\n\t\t\t\tlet resdata = {\r\n\t\t\t\t \ttype:\"guanzhu\",\r\n\t\t\t\t \tuserid:this.userinfo.id,\r\n\t\t\t\t \tdata:val\r\n\t\t\t\t};\r\n\t\t\t\tuni.$emit('updateData',resdata);\r\n\t\t\t},\r\n\t\t\t// 操作菜单显示隐藏\r\n\t\t\ttogleShow(){\r\n\t\t\t\tif (this.userinfo.id === this.User.userinfo.id) {\r\n\t\t\t\t\treturn this.User.navigate({\r\n\t\t\t\t\t\turl:\"/pages/user-set-userinfo/user-set-userinfo\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.show=!this.show;\r\n\t\t\t},\r\n\t\t\t// 拉黑\r\n\t\t\tasync lahei(){\r\n\t\t\t\tuni.showLoading({ title: 'Loading...', mask: false });\r\n\t\t\t\tlet url = this.userinfo.isblack ? '/removeblack' : '/addblack';\r\n\t\t\t\tlet msg = this.userinfo.isblack ? '移除黑名单' : '加入黑名单';\r\n\t\t\t\tlet [err,res] = await this.$http.post(url,{\r\n\t\t\t\t\tid:this.userinfo.id\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true,\r\n\t\t\t\t\tcheckToken:true,\r\n\t\t\t\t\tcheckAuth:true\r\n\t\t\t\t});\r\n\t\t\t\t// 错误处理\r\n\t\t\t\tif (!this.$http.errorCheck(err,res)) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\treturn this.togleShow();\r\n\t\t\t\t}\r\n\t\t\t\t// 成功\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({ title: msg+'成功' });\r\n\t\t\t\tthis.userinfo.isblack = !this.userinfo.isblack;\r\n\t\t\t\tthis.togleShow();\r\n\t\t\t},\r\n\t\t\t// 聊天\r\n\t\t\tgoToChat(){\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tuserid:this.userinfo.id,\r\n\t\t\t\t\tuserpic:this.userinfo.userpic,\r\n\t\t\t\t\tusername:this.userinfo.username\r\n\t\t\t\t};\r\n\t\t\t\tthis.User.navigate({\r\n\t\t\t\t\turl:\"/pages/user-chat/user-chat?userinfo=\"+JSON.stringify(obj)\r\n\t\t\t\t})\r\n\t\t\t\tthis.togleShow()\r\n\t\t\t},\r\n\t\t\t// 上拉加载更多\r\n\t\t\tloadmore(){\r\n\t\t\t\tif(this.tablist[this.tabIndex].loadtext!=\"上拉加载更多\") return;\r\n\t\t\t\t// 修改状态\r\n\t\t\t\tthis.tablist[this.tabIndex].loadtext=\"加载中...\";\r\n\t\t\t\tthis.tablist[this.tabIndex].page++;\r\n\t\t\t\tthis.getList();\r\n\t\t\t},\r\n\t\t\ttabtap(index){\r\n\t\t\t\tthis.tabIndex=index;\r\n\t\t\t\tif (this.tablist[index].firstload || index === 0) return;\r\n\t\t\t\tthis.getList();\r\n\t\t\t},\r\n\t\t\t// 获取列表\r\n\t\t\tasync getList(){\r\n\t\t\t\tlet page =this.tablist[this.tabIndex].page;\r\n\t\t\t\tlet url = this.userinfo.isme ? `/user/post/${page}` : `/user/${this.userinfo.id}/post/${page}`;\r\n\t\t\t\tlet index = this.tabIndex;\r\n\t\t\t\tlet [err,res] = await this.$http.get(url,{},{ token:true });\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!this.$http.errorCheck(err,res)) {\r\n\t\t\t\t\tthis.tablist[index].firstload = true;\r\n\t\t\t\t\treturn this.tablist[index].loadtext=\"上拉加载更多\";\r\n\t\t\t\t}\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tlet list = res.data.data.list;\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tarr.push(this.__format(list[i]));\r\n\t\t\t\t}\r\n\t\t\t\tthis.tablist[index].list = page > 1 ? this.tablist[index].list.concat(arr) : arr;\r\n\t\t\t\tthis.tablist[index].firstload = true;\r\n\t\t\t\tthis.tablist[index].loadtext= list.length < 10 ? \"没有更多数据了\" : \"上拉加载更多\";\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\t__format(item){\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tuserid:item.user.id,\r\n\t\t\t\t\tuserpic:item.user.userpic,\r\n\t\t\t\t\tusername:item.user.username,\r\n\t\t\t\t\tisguanzhu:!!item.user.fens.length,\r\n\t\t\t\t\tid:item.id,\r\n\t\t\t\t\ttitle:item.title,\r\n\t\t\t\t\ttype:\"img\", // img:图文,video:视频\r\n\t\t\t\t\ttitlepic:item.titlepic,\r\n\t\t\t\t\tvideo:false,\r\n\t\t\t\t\tpath:item.path,\r\n\t\t\t\t\tshare:!!item.share,\r\n\t\t\t\t\tinfonum:{\r\n\t\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\r\n\t\t\t\t\t\tdingnum:item.ding_count,\r\n\t\t\t\t\t\tcainum:item.cai_count,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgoodnum:item.ding_count,\r\n\t\t\t\t\tcommentnum:item.comment_count,\r\n\t\t\t\t\tsharenum:item.sharenum,\r\n\t\t\t\t\tsex:item.user.userinfo.sex,\r\n\t\t\t\t\tage:item.user.userinfo.age,\r\n\t\t\t\t};\r\n\t\t\t\tif (item.user_id === this.User.userinfo.id) {\r\n\t\t\t\t\tobj.isguanzhu = true;\r\n\t\t\t\t}\r\n\t\t\t\treturn obj;\r\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style>\n.user-space-margin{\r\n\tmargin: 15upx 0;\r\n}\r\n.user-space-data{\r\n\tbackground: #FFFFFF;\r\n\tposition: relative;\r\n\tz-index: 10;\r\n\tborder-top-left-radius: 20upx;\r\n\tborder-top-right-radius: 20upx;\r\n\tmargin-top: -15upx;\r\n}\r\n\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594192830503\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}