{"version":3,"sources":["uni-app:///main.js","webpack:///D:/1项目实践/前端代码！！！/pages/user-list/user-list.vue?5bbd","webpack:///D:/1项目实践/前端代码！！！/pages/user-list/user-list.vue?5621","webpack:///D:/1项目实践/前端代码！！！/pages/user-list/user-list.vue?3992","webpack:///D:/1项目实践/前端代码！！！/pages/user-list/user-list.vue?4920","uni-app:///pages/user-list/user-list.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,uG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,0MAEN;AACL,GAAG;AACH;AACA,WAAW,8LAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAsmB,CAAgB,mnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiE1nB;AACA;AACA,gCADA;AAEA,sBAFA;AAGA,sBAHA;AAIA,oBAJA;;AAMA,wBANA,EADA;;;AAUA;AACA;AACA;;;;AAIA;AACA;AACA,MAlBA,kBAkBA;AACA;AACA,uBADA;AAEA,iBAFA;AAGA;AACA,2CADA;AAEA,4CAFA;AAGA,0CAHA,CAHA;;;AASA;AACA;AACA,0BADA;AAEA,gBAFA;AAGA,eAHA;AAIA,wBAJA,EADA;;AAOA;AACA,0BADA;AAEA,gBAFA;AAGA,eAHA;AAIA,wBAJA,EAPA;;AAaA;AACA,0BADA;AAEA,gBAFA;AAGA,eAHA;AAIA,wBAJA,EAbA,CATA;;;;;AA+BA,GAlDA;AAmDA;AACA,0BApDA,oCAoDA,CApDA,EAoDA;AACA;AACA;AACA,gBADA;;AAGA;AACA,GA1DA;AA2DA,mCA3DA,+CA2DA;AACA;AACA,6CADA;;AAGA,GA/DA;AAgEA,QAhEA,oBAgEA;AACA;AACA,GAlEA;AAmEA,QAnEA,oBAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;;AAMA,GA7EA;AA8EA;;AAEA,cAFA,wBAEA;AACA;AACA,gBADA;;AAGA,KANA;AAOA,cAPA,wBAOA;AACA;AACA,+CADA;;AAGA,KAXA;;AAaA,UAbA,oBAaA;AACA;AACA;AACA;AACA;AACA,KAlBA;AAmBA,UAnBA,oBAmBA;AACA;AACA;AACA,KAtBA;AAuBA;AACA,WAxBA,qBAwBA;;AAEA,4BAFA,GAEA,eAFA;AAGA;AACA,+BADA;AAEA,oCAFA,GAHA,iHAGA,GAHA,6BAGA,GAHA;;;AAQA,iDARA;AASA,kEATA;;;AAYA;AACA,mBAbA,GAaA,EAbA;AAcA;AACA,oBAfA,GAeA,kBAfA;AAgBA;AACA;AACA;AACA;AACA;AACA,iGArBA;;;;;AA0BA,KAlDA;AAmDA,YAnDA,oBAmDA,IAnDA,EAmDA,YAnDA,EAmDA;AACA;AACA,iCADA;AAEA,6BAFA;AAGA,+BAHA;AAIA,8BAJA;AAKA,8BALA;AAMA,qCANA;;AAQA,KA5DA;AA6DA,YA7DA,oBA6DA,KA7DA,EA6DA;AACA;AACA;AACA;AACA;AACA;AACA,KAnEA;AAoEA;AACA,UArEA,kBAqEA,KArEA,EAqEA;AACA;;;;;;;AAOA,KA7EA;AA8EA;AACA,aA/EA,qBA+EA,CA/EA,EA+EA;AACA;AACA;AACA;AACA;AACA;AACA,KArFA,EA9EA,E","file":"pages/user-list/user-list.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user-list/user-list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-list.vue?vue&type=template&id=187c9808&\"\nvar renderjs\nimport script from \"./user-list.vue?vue&type=script&lang=js&\"\nexport * from \"./user-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user-list/user-list.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=template&id=187c9808&\"","var components = {\n  uniNavBar: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"\n    )\n  },\n  userList: function() {\n    return import(\n      /* webpackChunkName: \"components/user-list/user-list\" */ \"@/components/user-list/user-list.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"uni-tab-bar body\">\r\n\t\t\r\n\t\t\r\n\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t<uni-nav-bar :shadow=\"false\" :border=\"false\" @click-right=\"clickRight\">\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<view style=\"display: flex;justify-content: center;align-items: center;border-radius: 4px;margin-left: -120upx;height: 60upx;margin-top: 12upx;color: #CCCCCC;background: #F7F7F7;\" @tap=\"openSearch\">\r\n\t\t\t\t<view class=\"iconfont icon-sousuo\" style=\"margin-right: 6upx;\"></view>搜索用户\r\n\t\t\t</view>\r\n\t\t\t<!-- 右边按钮 -->\r\n\t\t\t<block slot=\"right\">\r\n\t\t\t\t<view>取消</view>\r\n\t\t\t</block>\r\n\t\t</uni-nav-bar>\r\n\t\t<!-- #endif -->\r\n\t\t\n\t\t<!-- tab切换 -->\r\n\t\t<swiper-tab-head \r\n\t\t:tabBars=\"tabBars\" \r\n\t\t:tabIndex=\"tabIndex\"\r\n\t\t@tabtap=\"tabtap\"\r\n\t\tscrollItemStyle=\"width:33%;\"\r\n\t\tscrollStyle=\"border-bottom:0;\">\r\n\t\t</swiper-tab-head>\r\n\t\t\r\n\t\t<view class=\"uni-tab-bar\">\r\n\t\t<swiper class=\"swiper-box\" \r\n\t\t:current=\"tabIndex\"\r\n\t\t:style=\"{height:swiperheight+'px'}\" \r\n\t\t@change=\"tabChange\">\r\n\t\t\t<swiper-item v-for=\"(items,index) in newslist\" :key=\"index\" > \r\n\t\t\t\t<scroll-view scroll-y class=\"list\" @scrolltolower=\"loadmore(index)\" >\r\n\t\t\t\t\t<template v-if=\"items.list.length>0\">\r\n\t\t\t\t\t\t<!-- 图文列表 -->\r\n\t\t\t\t\t\t<block v-for=\"(item,index1) in items.list\" :key=\"index1\">\r\n\t\t\t\t\t\t\t<user-list :item=\"item\" :index=\"index1\" hidden></user-list>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t\t<load-more :loadtext=\"items.loadtext\"></load-more>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else-if=\"!items.firstload\">\r\n\t\t\t\t\t\t<view style=\"font-size: 50upx;font-weight: bold;color: #CCCCCC;\r\n\t\t\t\t\t\tpadding-top: 100upx;\" class=\"u-f-ajc\">Loading ...</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<!-- 无内容默认 -->\r\n\t\t\t\t\t\t<no-thing></no-thing>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>   \r\n\t\t</view>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\t// #ifndef APP-PLUS\r\n\timport uniNavBar from \"../../components/uni-nav-bar/uni-nav-bar.vue\";\r\n\t// #endif\r\n\timport swiperTabHead from \"../../components/index/swiper-tab-head.vue\";\r\n\timport userList from \"../../components/user-list/user-list.vue\";\r\n\timport loadMore from \"../../components/common/load-more.vue\";\r\n\timport noThing from \"../../components/common/no-thing.vue\";\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tswiperTabHead,\r\n\t\t\tuserList,\r\n\t\t\tloadMore,\r\n\t\t\tnoThing,\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tuniNavBar\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t// computed: {\r\n\t\t// \tgetHeight() {\r\n\t\t// \t\t// #ifdef MP-ALIPAY\r\n\t\t// \t\tlet height = uni.getSystemInfoSync().windowHeight - uni.upx2px(100);\r\n\t\t// \t\treturn `height: ${height}px;`;\r\n\t\t// \t\t// #endif\r\n\t\t// \t}\r\n\t\t// },\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tswiperheight:500,\n\t\t\t\ttabIndex:0,\r\n\t\t\t\ttabBars:[\r\n\t\t\t\t\t{ name:\"互关\",id:\"huguan\",num:10 },\r\n\t\t\t\t\t{ name:\"关注\",id:\"guanzhu\",num:20 },\r\n\t\t\t\t\t{ name:\"粉丝\",id:\"fensi\",num:30 },\r\n\t\t\t\t],\r\n\t\t\t\t\r\n\t\t\t\tnewslist:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t\t\n\t\t\t};\n\t\t},\r\n\t\t// 监听导航按钮事件\r\n\t\tonNavigationBarButtonTap(e) {\r\n\t\t\tif(e.index==0){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonNavigationBarSearchInputClicked() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../search/search?searchType=user',\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.__init();\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getNav();\r\n\t\t\t// 开启监听\r\n\t\t\tuni.$on('updateData',this.updateData);\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\tlet height=res.windowHeight-uni.upx2px(100)\r\n\t\t\t\t\tthis.swiperheight=height;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tclickRight(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topenSearch(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../search/search?searchType=user',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t__init(){\r\n\t\t\t\tthis.tabBars[0].num = this.User.counts.friend_count < 100 ? this.User.counts.friend_count : '99+';\r\n\t\t\t\tthis.tabBars[1].num = this.User.counts.withfollow_count < 100 ? this.User.counts.withfollow_count : '99+';\r\n\t\t\t\tthis.tabBars[2].num = this.User.counts.withfen_count < 100 ? this.User.counts.withfen_count : '99+';\r\n\t\t\t\tthis.getList();\r\n\t\t\t},\r\n\t\t\tgetUrl(){\r\n\t\t\t\tlet arr = ['/friends/','/follows/','/fens/'];\r\n\t\t\t\treturn arr[this.tabIndex]+this.newslist[this.tabIndex].page;\r\n\t\t\t},\r\n\t\t\t// 获取列表\r\n\t\t\tasync getList(){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tlet currentIndex = this.tabIndex;\r\n\t\t\t\t\tlet [err,res] = await this.$http.get(this.getUrl(),{},{\r\n\t\t\t\t\t\ttoken:true,\r\n\t\t\t\t\t\tcheckToken:true\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 错误处理\r\n\t\t\t\t\tif (!this.$http.errorCheck(err,res)) {\r\n\t\t\t\t\t\tthis.newslist[currentIndex].loadtext=\"上拉加载更多\";\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 获取成功\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tlet list = res.data.data.list;\r\n\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tarr.push(this.__format(list[i],currentIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.newslist[currentIndex].list = this.newslist[currentIndex].page > 1 ? this.newslist[currentIndex].list.concat(arr) : arr;\r\n\t\t\t\t\tthis.newslist[currentIndex].firstload = true;\r\n\t\t\t\t\tthis.newslist[currentIndex].loadtext= list.length < 10 ? \"没有更多数据了\" : \"上拉加载更多\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t__format(item,currentIndex){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid:item.userinfo.user_id,\r\n\t\t\t\t\tuserpic:item.userpic,\r\n\t\t\t\t\tusername:item.username,\r\n\t\t\t\t\tage:item.userinfo.age,\r\n\t\t\t\t\tsex:item.userinfo.sex,\r\n\t\t\t\t\tisguanzhu:currentIndex !== 2 \r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadmore(index){\r\n\t\t\t\tif(this.newslist[index].loadtext!==\"上拉加载更多\")  return;\r\n\t\t\t\t// 修改状态\r\n\t\t\t\tthis.newslist[index].loadtext=\"加载中...\";\r\n\t\t\t\tthis.newslist[index].page++;\r\n\t\t\t\tthis.getList();\r\n\t\t\t},\r\n\t\t\t// tabbar点击事件\r\n\t\t\ttabtap(index){\r\n\t\t\t\tthis.tabIndex=index;\r\n\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\t// 判断是否首次加载过了\r\n\t\t\t\tif (!this.newslist[this.tabIndex].firstload) {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 滑动事件\r\n\t\t\ttabChange(e){\r\n\t\t\t\tthis.tabIndex=e.detail.current;\r\n\t\t\t\t// 判断是否首次加载过了\r\n\t\t\t\tif (!this.newslist[this.tabIndex].firstload) {\r\n\t\t\t\t\tthis.getList();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style>\r\n\n</style>\n"],"sourceRoot":""}